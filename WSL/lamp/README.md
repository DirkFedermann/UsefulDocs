# lamp.sh

The lamp.sh script is a bash script that helps to administrate the lamp stack.
You can start, stop and restart Apache2, MariaDB and all installed PHP versions at once.
You can add and remove projects. The script will automatically generate a .conf file for Apache2 and enable the site, generate an SSL Certificate with the help of mkcert and reminds you to edit the Windows hosts file, to be able to open the project in the browser on Windows.

In the first few lines you can edit the local development domain, the documentRoot path of your web development folder and the path of where the certificates that get generated by mkcert.

## Installation:

Download the lamp.sh file, give it execution rights and copy it to your `/usr/local/bin` folder:
```
sudo chmod +x lamp.sh
sudo cp lamp.sh /usr/local/bin/lamp
sudo rm lamp.sh
```
Now you can use the command lamp everywhere in the terminal.

If you need or want to change something you have to open it up in the new location:
```
sudo nano /usr/local/bin/lamp
```
## Usage:

lamp.sh always needs to be called with sudo! Otherwise it will not work.

To start the web development services Apache2, MariaDB and all PHP versions type in:
```
sudo lamp start
```
To stop the services
```
sudo lamp stop
```
and to restart the services
```
sudo lamp restart
```


### Adding a project:
```
sudo lamp add [PROJECT-NAME] [PHP-VERSION] [PUBLIC-FOLDER]
```
so for example:
```
sudo lamp add test-project 8.2 public
```
that will generate a `test-project.local.dev.conf` in the sites-available folder of Apache2, enable the site and reload Apache2 automatically.
It also uses mkcert to generate certificates, so you can instantly use https on a local project (granted you have set up mkcert and the scripts for it from the WSL2 SSL Certificate using mkcert tutorial.

All you have to do now is to add the newly created host name in your Windows `hosts` file located here: `C:\Windows\System32\drivers\etc`
You have to add the IP Address of the WSL2 Instance you are using and the host name (in this example `test-project.local.dev`) in one line seperated by a whitespace/tab like this
```
172.27.109.26		test-project.local.dev
```
What IP Address your WSL2 Instance has, you can see in the output when you generate the project using the lamp.sh or use this command:
```
hostname -I
```
**Tipp: If the public folder is the root folder of the project, leave that parameter empty.**


### Removing a project:
```
sudo lamp remove [PROJECT-NAME]
```
so for example:
```
sudo lamp remove test-project
```
that will remove the project .conf out of the `sites-available` folder of Apache2, disable the site and reload Apache2.
It also deletes the certificate files associated with the project.
All you have to do is remove the line with the host name in the Windows `hosts` file located here: `C:\Windows\System32\drivers\etc`

